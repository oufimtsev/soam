<!DOCTYPE html>

<html xmlns:th="https://www.thymeleaf.org" th:replace="~{fragments/layout :: layout (~{::body}, ~{::head}, 'templateLinks')}">
<head></head>
<body>

<h2>Template Links</h2>
<div class="alert alert-warning" th:if="${#lists.isEmpty(templateLinks) && !isFiltered}">
    No Template Links have been defined.
</div>
<div class="alert alert-warning" th:if="${#lists.isEmpty(templateLinks) && isFiltered}">
    No Template Links found for selected filters.
</div>
<table id="templateLinks" class="table table-striped">
    <thead>
    <tr>
        <th>Specification Template</th>
        <th>Stakeholder Template</th>
        <th>Objective Template</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="templateLink : ${templateLinks}" th:object="${templateLink}" th:with="formId = 'deleteForm_' + *{id}">
        <td th:text="*{specificationTemplate.name}"/>
        <td th:text="*{stakeholderTemplate.name}"/>
        <td th:text="*{objectiveTemplate.name}"/>
        <td>
            <form th:id="${formId}" th:action="@{/templateLink/__*{id}__/delete}" method="post">
                <input type="hidden" th:name="id" th:value="*{id}"/>
            </form>
            <a class="btn btn-sm btn-primary mt-0"
                th:attr="onclick = ${'if(confirm(''Are you sure you want to delete this template link?'')) document.getElementById(''' + formId + ''').submit()'}">
                <i class="fa fa-trash-o me-2" aria-hidden="true"></i>Delete
            </a>
        </td>
    </tr>
    <form th:object="${newTemplateLink}" th:action="@{/templateLink/list}" method="post">
        <input type="hidden" th:name="createNewAction" th:value="@{/templateLink/new}"/>
        <tr>
            <td>
                <input th:replace="~{fragments/templateLinkItemSelectField :: select ('specificationTemplate', ${specificationTemplates}, true, true)}" />
            </td>
            <td>
                <input th:replace="~{fragments/templateLinkItemSelectField :: select ('stakeholderTemplate', ${stakeholderTemplates}, true, true)}" />
            </td>
            <td>
                <input th:replace="~{fragments/templateLinkItemSelectField :: select ('objectiveTemplate', ${objectiveTemplates}, false, false)}" />
            </td>
            <td>
                <button type="button" class="btn btn-sm btn-primary mt-0"
                        onclick="this.form.action=this.form.createNewAction.value;this.form.submit()"><i class="fa fa-plus me-1" aria-hidden="true"></i>Add</button>
            </td>
        </tr>
    </form>
    </tbody>
</table>
<div th:replace="~{fragments/flash :: subFlashMessage}"></div>
</body>
</html>

